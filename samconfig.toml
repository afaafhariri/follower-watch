# FollowerCount SAM Configuration
version: 0.1

default:
  global:
    parameters:
      stack_name: follower-count
      s3_prefix: follower-count
      region: us-east-1
      confirm_changeset: true
      capabilities: CAPABILITY_IAM

  build:
    parameters:
      use_container: false
      parallel: true

  deploy:
    parameters:
      confirm_changeset: true
      fail_on_empty_changeset: false
      capabilities: CAPABILITY_IAM
      parameter_overrides:
        - Stage=prod
        - FrontendDomain=*

  sync:
    parameters:
      watch: true

  local_start_api:
    parameters:
      warm_containers: EAGER

dev:
  deploy:
    parameters:
      stack_name: follower-count-dev
      parameter_overrides:
        - Stage=dev
        - FrontendDomain=*
      confirm_changeset: false

staging:
  deploy:
    parameters:
      stack_name: follower-count-staging
      parameter_overrides:
        - Stage=staging
        - FrontendDomain=*

prod:
  deploy:
    parameters:
      stack_name: follower-count-prod
      parameter_overrides:
        - Stage=prod
        - FrontendDomain=https://your-domain.com
      confirm_changeset: true
